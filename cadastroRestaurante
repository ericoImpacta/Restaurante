from flask import Flask, request, jsonify
from flask_cors import CORS
import mysql.connector

app = Flask(__name__)
CORS(app)

db = mysql.connector.connect(
    host="localhost",
    user="root",        
    password="Eagles6-",  
    database="restaurante_db"
)
cursor = db.cursor(dictionary=True)
  
  @app.route("/restaurantes", methods=["POST"])
def cadastrar_restaurante():
    data = request.json
    cursor.execute("INSERT INTO restaurantes (nome, endereco) VALUES (%s, %s)", (data["nome"], data["endereco"]))
    db.commit()
    return jsonify({"message": "Restaurante cadastrado com sucesso!"})

@app.route("/restaurantes", methods=["GET"])
def listar_restaurantes():
    cursor.execute("SELECT * FROM restaurantes")
    return jsonify(cursor.fetchall())
